# üé• ‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö Video Processing

## ‚úÖ ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÅ‡∏•‡πâ‡∏ß:

### 1. **‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÄ‡∏î‡∏¥‡∏°:**
- ‚ùå ‡πÉ‡∏ä‡πâ `extract_bboxes` ‡πÅ‡∏•‡∏∞ `merge_boxes` ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ô OCR ‡∏à‡∏£‡∏¥‡∏á‡πÜ
- ‚ùå ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏≠‡πà‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≤‡∏Å‡∏õ‡πâ‡∏≤‡∏¢‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô
- ‚ùå ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• "Found 0 unique plates"

### 2. **‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:**
- ‚úÖ ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÉ‡∏ä‡πâ `run_ocr_on_bbox()` ‡πÅ‡∏ö‡∏ö‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö `/detect`
- ‚úÖ ‡∏£‡∏±‡∏ô OCR ‡∏ö‡∏ô cropped plate image ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á
- ‚úÖ ‡∏Ç‡πâ‡∏≤‡∏° frame ‡∏ó‡∏µ‡πà‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ (‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤ 2 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£)
- ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢‡πÉ‡∏ô Frontend
- ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏° console.log ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö debug

---

## üß™ ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏î‡∏™‡∏≠‡∏ö:

### **1. ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠**
1. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà http://localhost:8000
2. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å "Video" radio button
3. ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏£‡∏∑‡∏≠‡∏•‡∏≤‡∏Å‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏°‡∏≤‡∏ß‡∏≤‡∏á
4. ‡∏Å‡∏î "üöÄ Process"

### **2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå**
‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á:
- **Plate Text**: ‡πÄ‡∏•‡∏Ç‡∏õ‡πâ‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏Ñ‡∏±‡πà‡∏ô‡∏î‡πâ‡∏ß‡∏¢ comma)
- **Province**: ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏õ‡πâ‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏ã‡πâ‡∏≥‡∏Å‡∏±‡∏ô
- **Confidence**: ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏ü‡∏£‡∏°‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•
- **Gate Status**: ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å

### **3. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Console**
‡πÄ‡∏õ‡∏¥‡∏î Developer Tools (F12) ‚Üí Console
- ‡∏à‡∏∞‡πÄ‡∏´‡πá‡∏ô log: `Video processing result: {...}`
- ‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•: `unique_plates`, `frames_processed`, `records_saved`

---

## üîç ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå:

### **‡∏Å‡∏£‡∏ì‡∏µ‡∏û‡∏ö‡∏õ‡πâ‡∏≤‡∏¢:**
```json
{
  "session_id": "abc123...",
  "frames_processed": 68,
  "unique_plates": ["‡∏Å‡∏Å1234", "‡∏Å‡∏Ç5678"],
  "records_saved": 12,
  "sample_record_ids": [1, 2, 3, ...]
}
```

**‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•:**
- Plate Text: `‡∏Å‡∏Å1234, ‡∏Å‡∏Ç5678`
- Province: `‡∏û‡∏ö 2 ‡∏õ‡πâ‡∏≤‡∏¢‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏ã‡πâ‡∏≥‡∏Å‡∏±‡∏ô`
- Confidence: `‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏• 68 ‡πÄ‡∏ü‡∏£‡∏°`
- Gate Status: `‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å 12 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£`

### **‡∏Å‡∏£‡∏ì‡∏µ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏õ‡πâ‡∏≤‡∏¢:**
```json
{
  "session_id": "abc123...",
  "frames_processed": 68,
  "unique_plates": [],
  "records_saved": 0,
  "sample_record_ids": []
}
```

**‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•:**
- Plate Text: `‚ùå ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏õ‡πâ‡∏≤‡∏¢‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô`
- Province: `‡∏•‡∏≠‡∏á‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏õ‡πâ‡∏≤‡∏¢‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô‡∏Å‡∏ß‡πà‡∏≤`
- Confidence: `‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏• 68 ‡πÄ‡∏ü‡∏£‡∏°`
- Gate Status: `‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å 0 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£`

---

## ‚öôÔ∏è ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ (Environment Variables):

### **Frame Processing:**
```bash
VIDEO_FRAME_STRIDE=10       # ‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏ó‡∏∏‡∏Å 10 ‡πÄ‡∏ü‡∏£‡∏° (‡πÄ‡∏£‡πá‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô)
VIDEO_MAX_FRAMES=600        # ‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 600 ‡πÄ‡∏ü‡∏£‡∏°
VIDEO_MIN_LETTERS=2         # ‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 2 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£
```

### **Gate Control:**
```bash
VIDEO_OPEN_GATE_FIRST=true  # ‡πÄ‡∏õ‡∏¥‡∏î‡∏õ‡∏£‡∏∞‡∏ï‡∏π‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏à‡∏≠‡∏õ‡πâ‡∏≤‡∏¢‡πÉ‡∏´‡∏°‡πà
```

---

## üêõ ‡∏Å‡∏≤‡∏£ Debug:

### **1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Server Logs:**
```bash
# ‡∏î‡∏π logs ‡∏Ç‡∏≠‡∏á uvicorn
# ‡∏à‡∏∞‡πÄ‡∏´‡πá‡∏ô:
# - "DEBUG video processing error: ..." (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ error)
# - "[GATE(video)] ok=... reason=... plate='...' conf=..."
```

### **2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Console:**
```javascript
// ‡πÄ‡∏õ‡∏¥‡∏î F12 ‚Üí Console
// ‡∏à‡∏∞‡πÄ‡∏´‡πá‡∏ô:
console.log('Video processing result:', data);
```

### **3. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Records Tab:**
- ‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡πÅ‡∏ó‡πá‡∏ö "üìä Records"
- ‡∏î‡∏π‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ = OCR ‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏´‡∏£‡∏∑‡∏≠ skip ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î

---

## üí° ‡πÄ‡∏Ñ‡∏•‡πá‡∏î‡∏•‡∏±‡∏ö:

### **1. ‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏î‡∏µ:**
- ‚úÖ ‡∏õ‡πâ‡∏≤‡∏¢‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô
- ‚úÖ ‡πÅ‡∏™‡∏á‡∏™‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠
- ‚úÖ ‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏ï‡∏£‡∏á ‡πÑ‡∏°‡πà‡πÄ‡∏≠‡∏µ‡∏¢‡∏á
- ‚úÖ ‡∏õ‡πâ‡∏≤‡∏¢‡πÑ‡∏°‡πà‡πÄ‡∏ö‡∏•‡∏≠

### **2. ‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏ó‡∏µ‡πà‡∏≠‡∏≤‡∏à‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤:**
- ‚ùå ‡∏õ‡πâ‡∏≤‡∏¢‡πÄ‡∏•‡∏≠‡∏∞‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏Å‡∏õ‡∏£‡∏Å
- ‚ùå ‡πÅ‡∏™‡∏á‡∏ô‡πâ‡∏≠‡∏¢‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ/‡∏°‡∏≤‡∏Å‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ
- ‚ùå ‡∏Å‡∏•‡πâ‡∏≠‡∏á‡πÄ‡∏≠‡∏µ‡∏¢‡∏á‡∏°‡∏≤‡∏Å
- ‚ùå ‡∏õ‡πâ‡∏≤‡∏¢‡πÄ‡∏ö‡∏•‡∏≠‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏´‡∏ß‡πÄ‡∏£‡πá‡∏ß

### **3. ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏á:**
- ‡∏•‡∏î `VIDEO_FRAME_STRIDE` = ‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏ö‡πà‡∏≠‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô (‡∏ä‡πâ‡∏≤‡∏•‡∏á ‡πÅ‡∏ï‡πà‡πÅ‡∏°‡πà‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô)
- ‡πÄ‡∏û‡∏¥‡πà‡∏° `VIDEO_FRAME_STRIDE` = ‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏ô‡πâ‡∏≠‡∏¢‡∏•‡∏á (‡πÄ‡∏£‡πá‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô ‡πÅ‡∏ï‡πà‡∏≠‡∏≤‡∏à‡∏û‡∏•‡∏≤‡∏î)
- ‡∏•‡∏î `VIDEO_MIN_LETTERS` = ‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏ú‡∏•‡∏ó‡∏µ‡πà‡∏™‡∏±‡πâ‡∏ô‡∏Å‡∏ß‡πà‡∏≤
- ‡πÄ‡∏û‡∏¥‡πà‡∏° `VIDEO_MAX_FRAMES` = ‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏¢‡∏≤‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô

---

## ‚úÖ ‡∏™‡∏£‡∏∏‡∏õ:

**‡∏£‡∏∞‡∏ö‡∏ö Video Processing ‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ:**
1. ‚úÖ ‡πÉ‡∏ä‡πâ YOLO Detector ‡∏´‡∏≤‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏õ‡πâ‡∏≤‡∏¢
2. ‚úÖ Crop ‡∏õ‡πâ‡∏≤‡∏¢‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏≠‡∏≠‡∏Å‡∏°‡∏≤
3. ‚úÖ ‡πÉ‡∏ä‡πâ YOLO Reader ‡∏≠‡πà‡∏≤‡∏ô‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£
4. ‚úÖ ‡πÉ‡∏ä‡πâ Tesseract OCR ‡∏≠‡πà‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏£‡∏¥‡∏á‡πÜ
5. ‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á Database
6. ‚úÖ Broadcast ‡∏ú‡πà‡∏≤‡∏ô WebSocket
7. ‚úÖ ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏õ‡∏£‡∏∞‡∏ï‡∏π‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

**‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô! ‡∏•‡∏≠‡∏á‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏î‡∏π‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö** üé•



