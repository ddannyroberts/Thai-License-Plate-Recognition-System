# üìù ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏£‡∏±‡∏ô‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå Thai License Plate Recognition System

‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏±‡∏ô‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡∏ô‡∏µ‡πâ‡πÅ‡∏ö‡∏ö‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô

---

## üöÄ ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 1: ‡∏£‡∏±‡∏ô‡πÅ‡∏ö‡∏ö Native (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Development)

### 1. ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Dependencies

```bash
# ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Python version (‡∏ï‡πâ‡∏≠‡∏á 3.11+)
python3 --version

# ‡∏™‡∏£‡πâ‡∏≤‡∏á Virtual Environment
python3 -m venv .venv

# ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô Virtual Environment
# macOS/Linux:
source .venv/bin/activate

# Windows:
# .venv\Scripts\activate

# ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Python packages
pip install --upgrade pip
pip install -r requirements.txt
```

### 2. ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Tesseract OCR

**macOS:**
```bash
brew install tesseract tesseract-lang
```

**Ubuntu/Debian:**
```bash
sudo apt-get update
sudo apt-get install -y tesseract-ocr tesseract-ocr-tha tesseract-ocr-eng
```

**‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á:**
```bash
tesseract --version
tesseract --list-langs  # ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ tha ‡πÅ‡∏•‡∏∞ eng
```

### 3. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Environment Variables

‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå `.env` ‡πÉ‡∏ô‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå:

```bash
# ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå .env
cat > .env << 'EOF'
# Database (‡πÉ‡∏ä‡πâ SQLite ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö development)
DATABASE_URL=sqlite:///./data.db

# App Settings
APP_HOST=0.0.0.0
APP_PORT=8000

# Models (optional - ‡∏°‡∏µ default ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß)
DETECTOR_WEIGHTS=models/detector/best.pt
READER_WEIGHTS=models/reader/best.pt

# OCR
TESSERACT_LANG=tha+eng

# Arduino (‡∏õ‡∏¥‡∏î‡πÑ‡∏ß‡πâ‡∏Å‡πà‡∏≠‡∏ô‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠)
SERIAL_ENABLED=false
SERIAL_PORT=/dev/cu.usbmodem11201  # macOS
# SERIAL_PORT=/dev/ttyACM0          # Linux
SERIAL_BAUD=115200

# Gate Control
FORCE_OPEN_ALWAYS=0
GATE_TRIGGER_MODE=every_record  # every_record | per_plate_cooldown
OPEN_COOLDOWN_SEC=10
ALLOWED_PREFIXES=              # ‡∏ß‡πà‡∏≤‡∏á‡πÑ‡∏ß‡πâ = ‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
PLATE_STRICT=0
EOF
```

### 4. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Models

```bash
# ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ model files
ls -lh models/detector/best.pt
ls -lh models/reader/best.pt

# ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ models ‡πÉ‡∏´‡πâ train ‡∏Å‡πà‡∏≠‡∏ô:
# python train_models.py          # ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Detector
# python train_reader_only.py     # ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Reader
```

### 5. ‡∏™‡∏£‡πâ‡∏≤‡∏á Admin User (Optional)

```bash
python create_admin.py
# Enter username: admin
# Enter email: admin@example.com
# Enter password: ******
```

### 6. ‡∏£‡∏±‡∏ô Server

**‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 1: ‡πÉ‡∏ä‡πâ uvicorn ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á**
```bash
# ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô venv ‡∏Å‡πà‡∏≠‡∏ô
source .venv/bin/activate

# ‡∏£‡∏±‡∏ô server
uvicorn api.main:app --host 0.0.0.0 --port 8000 --reload
```

**‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 2: ‡πÉ‡∏ä‡πâ start.sh script**
```bash
# ‡πÉ‡∏´‡πâ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå execute
chmod +x start.sh

# ‡∏£‡∏±‡∏ô script
./start.sh
```

**‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 3: ‡πÉ‡∏ä‡πâ restart_server.sh**
```bash
# ‡πÉ‡∏´‡πâ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå execute
chmod +x restart_server.sh

# ‡∏£‡∏±‡∏ô script (‡∏à‡∏∞ kill process ‡πÄ‡∏Å‡πà‡∏≤‡∏Å‡πà‡∏≠‡∏ô)
./restart_server.sh
```

### 7. ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå:
- **Web UI:** http://localhost:8000
- **API Docs:** http://localhost:8000/docs
- **Health Check:** http://localhost:8000/health

---

## üê≥ ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 2: ‡∏£‡∏±‡∏ô‡πÅ‡∏ö‡∏ö Docker

### 1. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå .env ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Docker

```bash
cat > .env << 'EOF'
# Database
POSTGRES_DB=lpr_db
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres

# App
APP_HOST=0.0.0.0
APP_PORT=8000

# Models
DETECTOR_WEIGHTS=models/detector/best.pt
READER_WEIGHTS=models/reader/best.pt

# Arduino (‡πÉ‡∏ä‡πâ socket bridge ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Docker)
SERIAL_ENABLED=true
SERIAL_PORT=socket://host.docker.internal:3333
SERIAL_BAUD=115200

# Gate Control
GATE_TRIGGER_MODE=every_record
EOF
```

### 2. Build ‡πÅ‡∏•‡∏∞ Run Docker

```bash
# Build Docker images
docker-compose build

# Start services (run in background)
docker-compose up -d

# ‡∏î‡∏π logs
docker-compose logs -f api

# Stop services
docker-compose down

# Stop ‡πÅ‡∏•‡∏∞‡∏•‡∏ö volumes
docker-compose down -v
```

### 3. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Services

```bash
# ‡∏î‡∏π status
docker-compose ps

# ‡∏î‡∏π logs real-time
docker-compose logs -f

# ‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡πÉ‡∏ô container
docker-compose exec api bash
```

---

## üîå ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Arduino (Optional)

### 1. Upload Firmware ‡πÑ‡∏õ‡∏¢‡∏±‡∏á Arduino

```bash
# ‡πÄ‡∏õ‡∏¥‡∏î Arduino IDE
# ‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏ü‡∏•‡πå: arduino/gate_control_wifi.ino
# ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Board: Arduino UNO
# ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Port:
#   - macOS: /dev/cu.usbmodem*
#   - Linux: /dev/ttyACM0
#   - Windows: COM3 (‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÉ‡∏ô Device Manager)
# Upload (Ctrl+U ‡∏´‡∏£‡∏∑‡∏≠ Cmd+U)
```

### 2. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Serial Connection

```bash
# ‡πÄ‡∏õ‡∏¥‡∏î Serial Monitor ‡πÉ‡∏ô Arduino IDE
# ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤:
#   - Baud Rate: 115200
#   - Line Ending: Newline
# ‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á:
#   PING  ‚Üí ‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏î‡πâ PONG
#   OPEN  ‚Üí Servo ‡∏ï‡πâ‡∏≠‡∏á‡∏´‡∏°‡∏∏‡∏ô
```

### 3. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ .env ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Arduino

```bash
# ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç .env
SERIAL_ENABLED=true
SERIAL_PORT=/dev/cu.usbmodem11201  # ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ï‡∏≤‡∏° port ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
SERIAL_BAUD=115200
```

### 4. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Serial Port

**macOS:**
```bash
ls /dev/cu.usbmodem*
```

**Linux:**
```bash
ls /dev/ttyACM*
# ‡∏´‡∏£‡∏∑‡∏≠
ls /dev/ttyUSB*
```

**‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ Permission (Linux):**
```bash
# ‡πÄ‡∏û‡∏¥‡πà‡∏° user ‡πÄ‡∏Ç‡πâ‡∏≤ dialout group
sudo usermod -a -G dialout $USER
# Logout ‡πÅ‡∏•‡∏∞ Login ‡πÉ‡∏´‡∏°‡πà

# ‡∏´‡∏£‡∏∑‡∏≠ chmod (temporary)
sudo chmod 666 /dev/ttyACM0
```

### 5. Restart Server

```bash
# Stop server (Ctrl+C) ‡πÅ‡∏•‡πâ‡∏ß‡∏£‡∏±‡∏ô‡πÉ‡∏´‡∏°‡πà
./restart_server.sh
# ‡∏´‡∏£‡∏∑‡∏≠
uvicorn api.main:app --host 0.0.0.0 --port 8000 --reload
```

---

## üß™ ‡∏ó‡∏î‡∏™‡∏≠‡∏ö API

### 1. Health Check

```bash
curl http://localhost:8000/health
```

### 2. Detect License Plate (Image)

```bash
# ‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ
curl -X POST http://localhost:8000/detect \
  -F "file=@car.jpg"
```

### 3. Detect from Image URL

```bash
curl -X POST http://localhost:8000/detect \
  -F "image_url=https://example.com/car.jpg"
```

### 4. Detect from Video

```bash
curl -X POST http://localhost:8000/detect-video \
  -F "file=@video.mp4" \
  -F "frame_stride=10" \
  -F "max_frames=100"
```

### 5. Get Records

```bash
# ‡∏î‡∏π records (paginated)
curl "http://localhost:8000/api/records?page=1&limit=20"

# ‡∏î‡∏π record ‡πÄ‡∏â‡∏û‡∏≤‡∏∞
curl http://localhost:8000/api/records/1
```

### 6. Get Statistics

```bash
curl http://localhost:8000/api/stats
```

### 7. Test Gate Control

```bash
# Test gate open
curl -X POST http://localhost:8000/api/gate/test

# Force close gate
curl -X POST http://localhost:8000/api/gate/close
```

### 8. Export CSV

```bash
curl http://localhost:8000/api/export/csv -o records.csv
```

---

## üì± ‡πÄ‡∏Ç‡πâ‡∏≤‡∏à‡∏≤‡∏Å‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠/‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏≠‡∏∑‡πà‡∏ô

### 1. ‡∏´‡∏≤ IP Address ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå

**macOS/Linux:**
```bash
ifconfig | grep "inet " | grep -v 127.0.0.1
# ‡∏´‡∏£‡∏∑‡∏≠
ip addr show | grep "inet " | grep -v 127.0.0.1
```

**Windows:**
```bash
ipconfig | findstr IPv4
```

### 2. ‡πÄ‡∏Ç‡πâ‡∏≤‡∏à‡∏≤‡∏Å‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠

```
http://192.168.1.100:8000
```
(‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô IP ‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô)

**‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:** ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏´‡πâ‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô WiFi ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô

---

## üîÑ ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏ö‡πà‡∏≠‡∏¢

### Start Server
```bash
source .venv/bin/activate
uvicorn api.main:app --host 0.0.0.0 --port 8000 --reload
```

### Restart Server
```bash
./restart_server.sh
```

### Stop Server
```bash
# ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 1: ‡∏Å‡∏î Ctrl+C ‡πÉ‡∏ô terminal ‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ô server

# ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 2: Kill process ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ pkill
pkill -f "uvicorn api.main:app"

# ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 3: ‡∏´‡∏≤ PID ‡πÅ‡∏•‡πâ‡∏ß kill
lsof -i :8000  # ‡∏´‡∏£‡∏∑‡∏≠ :8001
kill -9 <PID>

# ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 4: Kill ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ port
lsof -ti :8000 | xargs kill -9
lsof -ti :8001 | xargs kill -9
```

### ‡∏î‡∏π Logs
```bash
# ‡∏ñ‡πâ‡∏≤‡∏£‡∏±‡∏ô‡πÅ‡∏ö‡∏ö native
# logs ‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ô terminal ‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ô server

# ‡∏ñ‡πâ‡∏≤‡∏£‡∏±‡∏ô‡πÅ‡∏ö‡∏ö Docker
docker-compose logs -f api
```

### Clear Database
```bash
# ‡∏•‡∏ö‡πÑ‡∏ü‡∏•‡πå database (SQLite)
rm data.db

# ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ API
curl -X DELETE "http://localhost:8000/api/records/clear-old?days=0"
```

### ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Models
```bash
# ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ models ‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà
ls -lh models/detector/best.pt
ls -lh models/reader/best.pt

# ‡∏ó‡∏î‡∏™‡∏≠‡∏ö models
python test_models.py
```

---

## üêõ Troubleshooting

### 1. Import Error: No module named 'api'

```bash
# ‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ: ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ PYTHONPATH
export PYTHONPATH="${PYTHONPATH}:$(pwd)"
uvicorn api.main:app --reload

# ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ python -m
python -m uvicorn api.main:app --reload
```

### 2. Tesseract Not Found

```bash
# macOS
brew install tesseract tesseract-lang

# Ubuntu
sudo apt-get install tesseract-ocr tesseract-ocr-tha

# ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö
which tesseract
tesseract --version
```

### 3. Port Already in Use

```bash
# ‡∏´‡∏≤ process ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ port (‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô 8000 ‡πÄ‡∏õ‡πá‡∏ô port ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£)
lsof -i :8000
# ‡∏´‡∏£‡∏∑‡∏≠
lsof -i :8001

# ‡∏î‡∏π‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå ‡∏à‡∏∞‡πÄ‡∏´‡πá‡∏ô PID (‡πÄ‡∏ä‡πà‡∏ô Python 10056)
# Kill process ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ PID
kill -9 <PID>

# ‡∏´‡∏£‡∏∑‡∏≠ kill ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ port ‡∏ô‡∏±‡πâ‡∏ô (macOS/Linux)
lsof -ti :8000 | xargs kill -9
lsof -ti :8001 | xargs kill -9

# ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ pkill ‡πÄ‡∏û‡∏∑‡πà‡∏≠ kill uvicorn ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
pkill -f "uvicorn api.main:app"

# ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô port ‡πÉ‡∏ô .env
APP_PORT=8001
```

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:**
```bash
# ‡∏ñ‡πâ‡∏≤‡πÄ‡∏à‡∏≠ error: [Errno 48] Address already in use
# 1. ‡∏´‡∏≤ process
lsof -i :8001

# 2. Kill process (‡πÉ‡∏ä‡πâ PID ‡∏à‡∏≤‡∏Å‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô)
kill -9 10056 11450

# 3. ‡∏£‡∏±‡∏ô server ‡πÉ‡∏´‡∏°‡πà
uvicorn api.main:app --host 0.0.0.0 --port 8001 --reload
```

### 4. Models Not Found

```bash
# ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö
ls models/detector/best.pt
ls models/reader/best.pt

# ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ ‡πÉ‡∏´‡πâ train:
python train_models.py
python train_reader_only.py
```

### 5. Arduino Permission Denied (Linux)

```bash
sudo usermod -a -G dialout $USER
# Logout ‡πÅ‡∏•‡∏∞ Login ‡πÉ‡∏´‡∏°‡πà
```

### 6. Database Locked (SQLite)

```bash
# ‡∏õ‡∏¥‡∏î server ‡∏Å‡πà‡∏≠‡∏ô
# ‡∏•‡∏ö‡πÑ‡∏ü‡∏•‡πå database lock
rm data.db-journal

# ‡∏´‡∏£‡∏∑‡∏≠ restart server
./restart_server.sh
```

### 7. Serial Port ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏û‡∏ö

```bash
# ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 1: ‡πÉ‡∏ä‡πâ‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥)
./check_serial_port.sh

# ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 2: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏î‡πâ‡∏ß‡∏¢‡∏ï‡∏ô‡πÄ‡∏≠‡∏á
# macOS:
ls -la /dev/cu.* | grep usbmodem
ls -la /dev/tty.* | grep usbmodem

# Linux:
ls -la /dev/ttyACM*
ls -la /dev/ttyUSB*

# ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ port ‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÑ‡∏ß‡πâ‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡∏à‡∏£‡∏¥‡∏á
# ‡∏î‡∏π‡πÉ‡∏ô start.sh ‡∏´‡∏£‡∏∑‡∏≠ .env
grep SERIAL_PORT start.sh
grep SERIAL_PORT .env

# ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ port ‡∏ñ‡∏π‡∏Å‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏≠‡∏¢‡∏π‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
lsof /dev/cu.usbmodem11201  # macOS
lsof /dev/ttyACM0            # Linux

# ‡∏ñ‡πâ‡∏≤ port ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÉ‡∏ô start.sh ‡∏´‡∏£‡∏∑‡∏≠ .env
# macOS:
export SERIAL_PORT="/dev/cu.usbmodem11201"

# Linux:
export SERIAL_PORT="/dev/ttyACM0"
```

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤:**
```bash
# 1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö port ‡∏ó‡∏µ‡πà‡∏°‡∏µ
./check_serial_port.sh

# 2. ‡∏ñ‡πâ‡∏≤ port ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô (‡πÄ‡∏ä‡πà‡∏ô ‡∏à‡∏≤‡∏Å 11201 ‡πÄ‡∏õ‡πá‡∏ô 14201)
# ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÉ‡∏ô start.sh:
export SERIAL_PORT="/dev/cu.usbmodem14201"

# 3. Restart server
./restart_server.sh
```

---

## üìä ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Status

### ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Server Running

```bash
# Health check
curl http://localhost:8000/health

# ‡∏î‡∏π statistics
curl http://localhost:8000/api/stats
```

### ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Database

```bash
# SQLite
sqlite3 data.db
.tables
SELECT COUNT(*) FROM plate_records;
.quit
```

### ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Serial Connection

```bash
# ‡∏î‡∏π logs ‡πÉ‡∏ô terminal ‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ô server
# ‡∏Ñ‡∏ß‡∏£‡πÄ‡∏´‡πá‡∏ô:
# [ARDUINO] Connected to /dev/cu.usbmodem11201
# [SERIAL] ‚Üí OPEN
# [ARDUINO] CMD: OPEN ‚Üí ACK:OPEN
```

---

## üéØ Environment Variables Reference

| Variable | Description | Default |
|----------|-------------|---------|
| `DATABASE_URL` | Database connection string | `sqlite:///./data.db` |
| `APP_HOST` | Server host | `0.0.0.0` |
| `APP_PORT` | Server port | `8000` |
| `DETECTOR_WEIGHTS` | Detector model path | `models/detector/best.pt` |
| `READER_WEIGHTS` | Reader model path | `models/reader/best.pt` |
| `TESSERACT_LANG` | Tesseract languages | `tha+eng` |
| `SERIAL_ENABLED` | Enable serial communication | `false` |
| `SERIAL_PORT` | Serial port path | `/dev/ttyACM0` |
| `SERIAL_BAUD` | Baud rate | `115200` |
| `GATE_TRIGGER_MODE` | Trigger mode | `every_record` |
| `OPEN_COOLDOWN_SEC` | Cooldown in seconds | `10` |
| `ALLOWED_PREFIXES` | Allowed province codes | `` (all) |
| `PLATE_STRICT` | Strict prefix checking | `0` |

---

## üìö ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°

- [README.md](README.md) - ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏´‡∏•‡∏±‡∏Å‡∏â‡∏ö‡∏±‡∏ö‡πÄ‡∏ï‡πá‡∏°
- [QUICK_SETUP_SUMMARY.md](QUICK_SETUP_SUMMARY.md) - Quick start guide
- [ARDUINO_SETUP_GUIDE.md](ARDUINO_SETUP_GUIDE.md) - Arduino setup guide
- [TRAINING_GUIDE.md](TRAINING_GUIDE.md) - Model training guide

---

## ‚úÖ Checklist ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å

- [ ] ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Python 3.11+
- [ ] ‡∏™‡∏£‡πâ‡∏≤‡∏á Virtual Environment
- [ ] ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á dependencies (`pip install -r requirements.txt`)
- [ ] ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Tesseract OCR
- [ ] ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Models (`models/detector/best.pt` ‡πÅ‡∏•‡∏∞ `models/reader/best.pt`)
- [ ] ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå `.env`
- [ ] ‡∏£‡∏±‡∏ô server (`uvicorn api.main:app --reload`)
- [ ] ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Health Check (`curl http://localhost:8000/health`)
- [ ] ‡πÄ‡∏õ‡∏¥‡∏î Web UI (`http://localhost:8000`)
- [ ] (Optional) ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Arduino
- [ ] (Optional) ‡∏™‡∏£‡πâ‡∏≤‡∏á Admin User

---

**üéâ Happy Coding!**

**‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô:** 1.0  
**‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î:** 2025-01-XX

