# üîß ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Arduino + ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö Website
## **Step-by-Step Guide**

---

## üìã **‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°**

```
Website (FastAPI) ‚Üê‚îÄ USB Cable ‚îÄ‚Üí Arduino UNO ‚Üê‚îÄ ‡∏™‡∏≤‡∏¢ 3 ‡πÄ‡∏™‡πâ‡∏ô ‚îÄ‚Üí Servo Motor
     (‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå)                    (‡∏ï‡∏±‡∏ß‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°)              (‡πÑ‡∏°‡πâ‡∏Å‡∏±‡πâ‡∏ô)
```

---

# üõ†Ô∏è **Part 1: ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Arduino**

---

## üì¶ **‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°**

### **Hardware:**
- ‚úÖ Arduino UNO (‡∏´‡∏£‡∏∑‡∏≠ compatible board)
- ‚úÖ Servo Motor SG90
- ‚úÖ ‡∏™‡∏≤‡∏¢‡πÑ‡∏ü 3 ‡πÄ‡∏™‡πâ‡∏ô (‡∏°‡∏±‡∏Å‡∏°‡∏≤‡∏Å‡∏±‡∏ö Servo)
- ‚úÖ ‡∏™‡∏≤‡∏¢ USB Type-B (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡πà‡∏≠ Arduino ‡∏Å‡∏±‡∏ö‡∏Ñ‡∏≠‡∏°)
- ‚úÖ Breadboard (‡∏ñ‡πâ‡∏≤‡∏™‡∏∞‡∏î‡∏ß‡∏Å ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô)

### **Software:**
- ‚úÖ Arduino IDE (‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡∏à‡∏≤‡∏Å: https://www.arduino.cc/en/software)
- ‚úÖ ‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå (macOS/Windows/Linux)

---

## üîå **‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 1: ‡∏ï‡πà‡∏≠‡∏™‡∏≤‡∏¢ Servo Motor**

### **‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡∏™‡∏≤‡∏¢:**

```
Arduino UNO                     Servo Motor SG90
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê           ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                  ‚îÇ           ‚îÇ             ‚îÇ
‚îÇ  Digital Pin 9   ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ Signal      ‚îÇ ‡∏™‡∏≤‡∏¢‡∏™‡∏µ‡∏™‡πâ‡∏°/‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á
‚îÇ                  ‚îÇ           ‚îÇ             ‚îÇ
‚îÇ  5V              ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ VCC (Power) ‚îÇ ‡∏™‡∏≤‡∏¢‡∏™‡∏µ‡πÅ‡∏î‡∏á
‚îÇ                  ‚îÇ           ‚îÇ             ‚îÇ
‚îÇ  GND             ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ GND         ‚îÇ ‡∏™‡∏≤‡∏¢‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏•/‡∏î‡∏≥
‚îÇ                  ‚îÇ           ‚îÇ             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò           ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### **‡∏ß‡∏¥‡∏ò‡∏µ‡∏ï‡πà‡∏≠:**

1. **‡∏õ‡∏¥‡∏î Arduino ‡∏Å‡πà‡∏≠‡∏ô** (‡∏ñ‡∏≠‡∏î‡∏™‡∏≤‡∏¢ USB ‡∏≠‡∏≠‡∏Å)

2. **‡∏ï‡πà‡∏≠‡∏™‡∏≤‡∏¢ Servo:**
   - üü† **Signal (‡∏™‡∏≤‡∏¢‡∏™‡πâ‡∏°)** ‚Üí ‡∏ï‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤ **Pin 9** ‡∏Ç‡∏≠‡∏á Arduino
   - üî¥ **VCC (‡∏™‡∏≤‡∏¢‡πÅ‡∏î‡∏á)** ‚Üí ‡∏ï‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤ **5V** ‡∏Ç‡∏≠‡∏á Arduino
   - üü§ **GND (‡∏™‡∏≤‡∏¢‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏•)** ‚Üí ‡∏ï‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤ **GND** ‡∏Ç‡∏≠‡∏á Arduino

3. **‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á:**
   - ‚úÖ Signal ‚Üí Pin 9
   - ‚úÖ VCC ‚Üí 5V
   - ‚úÖ GND ‚Üí GND

> ‚ö†Ô∏è **‡∏Ñ‡∏≥‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô:** ‡∏ñ‡πâ‡∏≤‡∏ï‡πà‡∏≠‡∏ú‡∏¥‡∏î ‡∏≠‡∏≤‡∏à‡∏ó‡∏≥‡πÉ‡∏´‡πâ Servo ‡∏´‡∏£‡∏∑‡∏≠ Arduino ‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡πÑ‡∏î‡πâ!

---

## üíª **‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 2: ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Arduino IDE**

### **macOS:**
```bash
1. ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡∏à‡∏≤‡∏Å: https://www.arduino.cc/en/software
2. ‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏ü‡∏•‡πå .dmg
3. ‡∏•‡∏≤‡∏Å Arduino.app ‡πÑ‡∏õ‡πÉ‡∏™‡πà‡πÉ‡∏ô‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå Applications
4. ‡πÄ‡∏õ‡∏¥‡∏î Arduino IDE
```

### **Windows:**
```bash
1. ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î .exe ‡∏à‡∏≤‡∏Å: https://www.arduino.cc/en/software
2. Run installer
3. Next > Next > Install
4. ‡πÄ‡∏õ‡∏¥‡∏î Arduino IDE
```

### **Linux:**
```bash
# Ubuntu/Debian
sudo apt update
sudo apt install arduino

# ‡∏´‡∏£‡∏∑‡∏≠‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î .tar.xz ‡∏à‡∏≤‡∏Å website
```

---

## üìÇ **‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 3: ‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏ü‡∏•‡πå Arduino**

### **1. ‡πÄ‡∏õ‡∏¥‡∏î Arduino IDE**

### **2. ‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏ü‡∏•‡πå:**
```
File ‚Üí Open ‚Üí ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ü‡∏•‡πå
/Users/dannyroberts/Documents/thai-lpr-api/arduino/gate_control_wifi.ino
```

### **3. ‡∏à‡∏∞‡πÄ‡∏´‡πá‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡∏≤‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏ô‡∏µ‡πâ:**
```cpp
#include <Servo.h>

const int SERVO_PIN = 9;
const int OPEN_ANGLE = 90;
const int CLOSE_ANGLE = 0;

Servo gate;

void setup() {
  gate.attach(SERVO_PIN);
  Serial.begin(115200);
  ...
}
```

---

## üîß **‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 4: ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Arduino IDE**

### **1. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Board:**
```
Tools ‚Üí Board ‚Üí Arduino AVR Boards ‚Üí Arduino UNO
```

### **2. ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Arduino ‡∏Å‡∏±‡∏ö‡∏Ñ‡∏≠‡∏°:**
- ‡πÄ‡∏™‡∏µ‡∏¢‡∏ö‡∏™‡∏≤‡∏¢ USB ‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏±‡∏ö Arduino
- ‡∏õ‡∏•‡∏≤‡∏¢‡∏≠‡∏µ‡∏Å‡∏î‡πâ‡∏≤‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå

### **3. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Port:**

**macOS:**
```
Tools ‚Üí Port ‚Üí /dev/cu.usbmodem14201 (Arduino Uno)
               ‡∏´‡∏£‡∏∑‡∏≠ /dev/cu.usbmodem* (‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏µ‡πà‡∏°‡∏µ Arduino)
```

**Windows:**
```
Tools ‚Üí Port ‚Üí COM3 (Arduino Uno)
               ‡∏´‡∏£‡∏∑‡∏≠ COM4, COM5, ... (‡∏î‡∏π‡∏à‡∏≤‡∏Å Device Manager)
```

**Linux:**
```
Tools ‚Üí Port ‚Üí /dev/ttyACM0 (Arduino Uno)
               ‡∏´‡∏£‡∏∑‡∏≠ /dev/ttyUSB0
```

> üí° **‡πÑ‡∏°‡πà‡πÄ‡∏´‡πá‡∏ô Port?** ‚Üí ‡∏•‡∏≠‡∏á‡∏ñ‡∏≠‡∏î‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏™‡∏µ‡∏¢‡∏ö‡πÉ‡∏´‡∏°‡πà ‡∏´‡∏£‡∏∑‡∏≠‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Driver

---

## ‚¨ÜÔ∏è **‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 5: Upload ‡πÇ‡∏Ñ‡πâ‡∏î‡πÑ‡∏õ‡∏ó‡∏µ‡πà Arduino**

### **1. ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° Verify (‚úì):**
```
Sketch ‚Üí Verify/Compile
‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° ‚úì ‡∏°‡∏∏‡∏°‡∏ã‡πâ‡∏≤‡∏¢‡∏ö‡∏ô
```

‡∏£‡∏≠‡∏à‡∏ô‡πÄ‡∏´‡πá‡∏ô:
```
Compiling sketch...
Done compiling.
```

### **2. ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° Upload (‚Üí):**
```
Sketch ‚Üí Upload
‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° ‚Üí ‡∏Ç‡πâ‡∏≤‡∏á‡πÜ ‡∏õ‡∏∏‡πà‡∏° ‚úì
```

‡∏à‡∏∞‡πÄ‡∏´‡πá‡∏ô:
```
Uploading...
avrdude: writing flash...
avrdude: done.
Thank you.
```

### **3. ‡∏£‡∏≠‡∏à‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à:**
```
Done uploading.
```

üéâ **‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!** Arduino ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß!

---

## üß™ **‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 6: ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Arduino**

### **1. ‡πÄ‡∏õ‡∏¥‡∏î Serial Monitor:**
```
Tools ‚Üí Serial Monitor
‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏î Ctrl+Shift+M (Cmd+Shift+M ‡∏ö‡∏ô Mac)
```

### **2. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤:**
- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å **115200 baud** ‡∏ó‡∏µ‡πà‡∏°‡∏∏‡∏°‡∏Ç‡∏ß‡∏≤‡∏•‡πà‡∏≤‡∏á
- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å **Newline** ‡∏´‡∏£‡∏∑‡∏≠ **Both NL & CR**

### **3. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö:**

**Test 1: PING**
```
‡∏û‡∏¥‡∏°‡∏û‡πå: PING
‡∏Å‡∏î Send

‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏´‡πá‡∏ô:
‚Üí PONG
```

**Test 2: OPEN**
```
‡∏û‡∏¥‡∏°‡∏û‡πå: OPEN
‡∏Å‡∏î Send

‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏´‡πá‡∏ô:
‚Üí ACK:OPEN
‚Üí Servo ‡∏´‡∏°‡∏∏‡∏ô‡πÑ‡∏õ 90¬∞ (‡πÑ‡∏°‡πâ‡∏Å‡∏±‡πâ‡∏ô‡πÄ‡∏õ‡∏¥‡∏î)
‚Üí ‡∏£‡∏≠ 2 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
‚Üí Servo ‡∏´‡∏°‡∏∏‡∏ô‡∏Å‡∏•‡∏±‡∏ö 0¬∞ (‡πÑ‡∏°‡πâ‡∏Å‡∏±‡πâ‡∏ô‡∏õ‡∏¥‡∏î)
```

**Test 3: STATUS**
```
‡∏û‡∏¥‡∏°‡∏û‡πå: STATUS
‡∏Å‡∏î Send

‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏´‡πá‡∏ô:
‚Üí STATUS:CLOSED|ANGLE:0|UPTIME:123s
```

‚úÖ **‡∏ñ‡πâ‡∏≤‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ú‡πà‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á 3 ‡∏Ç‡πâ‡∏≠ ‡πÅ‡∏™‡∏î‡∏á‡∏ß‡πà‡∏≤ Arduino ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÅ‡∏•‡πâ‡∏ß!**

---

# üåê **Part 2: ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö Website**

---

## üìù **‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 1: ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå .env**

### **1. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà folder ‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ:**
```bash
cd /Users/dannyroberts/Documents/thai-lpr-api
```

### **2. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå .env:**
```bash
touch .env
```

### **3. ‡πÄ‡∏õ‡∏¥‡∏î‡∏î‡πâ‡∏ß‡∏¢ Text Editor:**
```bash
# macOS
open -a TextEdit .env

# ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ VS Code
code .env
```

---

## ‚öôÔ∏è **‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 2: ‡πÉ‡∏™‡πà‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤**

### **‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏ô‡∏µ‡πâ‡∏•‡∏á‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå .env:**

```bash
# ===== FastAPI Server =====
APP_HOST=0.0.0.0
APP_PORT=8000

# ===== Arduino Serial Connection =====
SERIAL_ENABLED=true
SERIAL_PORT=/dev/cu.usbmodem14201
SERIAL_BAUD=115200

# ===== Gate Control =====
GATE_TRIGGER_MODE=per_plate_cooldown
OPEN_COOLDOWN_SEC=30

# ===== AI Models =====
DETECTOR_WEIGHTS=models/detector/best.pt
READER_WEIGHTS=models/reader/best.pt

# ===== Database =====
DATABASE_URL=sqlite:///./data.db

# ===== OCR Settings =====
OCR_LANG=tha+eng
TESSERACT_CMD=/opt/homebrew/bin/tesseract

# ===== Plate Validation =====
FORCE_OPEN_ALWAYS=false
PLATE_STRICT=false
```

---

## üîç **‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 3: ‡∏´‡∏≤ Port ‡∏Ç‡∏≠‡∏á Arduino**

### **macOS:**
```bash
ls /dev/cu.*usb*

# ‡∏à‡∏∞‡πÄ‡∏´‡πá‡∏ô‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì:
/dev/cu.usbmodem14201
/dev/cu.usbmodem1101
```

**‡πÅ‡∏Å‡πâ‡πÉ‡∏ô .env:**
```bash
SERIAL_PORT=/dev/cu.usbmodem14201  # ‚Üê ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏à‡∏≠
```

### **Windows:**
```
1. ‡πÄ‡∏õ‡∏¥‡∏î Device Manager
2. Ports (COM & LPT)
3. ‡∏à‡∏∞‡πÄ‡∏´‡πá‡∏ô: Arduino Uno (COM3)
```

**‡πÅ‡∏Å‡πâ‡πÉ‡∏ô .env:**
```bash
SERIAL_PORT=COM3  # ‚Üê ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ï‡∏≤‡∏° port ‡∏ó‡∏µ‡πà‡πÄ‡∏à‡∏≠
```

### **Linux:**
```bash
ls /dev/ttyACM* /dev/ttyUSB*

# ‡∏à‡∏∞‡πÄ‡∏´‡πá‡∏ô:
/dev/ttyACM0
```

**‡πÅ‡∏Å‡πâ‡πÉ‡∏ô .env:**
```bash
SERIAL_PORT=/dev/ttyACM0  # ‚Üê ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏à‡∏≠
```

---

## üöÄ **‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 4: ‡∏£‡∏±‡∏ô‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå**

### **1. Activate virtual environment:**
```bash
cd /Users/dannyroberts/Documents/thai-lpr-api
source .venv/bin/activate
```

### **2. ‡∏£‡∏±‡∏ô‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå:**
```bash
python -m api.main
```

### **3. ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à:**

‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏´‡πá‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°:
```
[INFO] üü† Using local YOLO DETECTOR from: models/detector/best.pt
[INFO] üîµ Using local YOLO READER   from: models/reader/best.pt
[ARDUINO] Connected to /dev/cu.usbmodem14201
INFO:     Uvicorn running on http://0.0.0.0:8000
```

‚úÖ **‡πÄ‡∏´‡πá‡∏ô "[ARDUINO] Connected" = ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!**

---

## üß™ **‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 5: ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏à‡∏≤‡∏Å Website**

### **1. ‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå:**
```
http://localhost:8000
```

### **2. ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏õ‡πâ‡∏≤‡∏¢‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô:**
- ‡∏Å‡∏î "Choose File"
- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ
- ‡∏Å‡∏î "Detect Plate"

### **3. ‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï:**
- ‚úÖ ‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡πà‡∏≤‡∏ô‡∏õ‡πâ‡∏≤‡∏¢‡πÑ‡∏î‡πâ
- ‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á Database
- ‚úÖ Servo Motor ‡∏´‡∏°‡∏∏‡∏ô! (‡πÑ‡∏°‡πâ‡∏Å‡∏±‡πâ‡∏ô‡πÄ‡∏õ‡∏¥‡∏î)
- ‚úÖ ‡∏£‡∏≠ 2 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
- ‚úÖ Servo ‡∏´‡∏°‡∏∏‡∏ô‡∏Å‡∏•‡∏±‡∏ö (‡πÑ‡∏°‡πâ‡∏Å‡∏±‡πâ‡∏ô‡∏õ‡∏¥‡∏î)

---

# üéõÔ∏è **‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°**

---

## üîß **‡πÇ‡∏´‡∏°‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏°‡πâ‡∏Å‡∏±‡πâ‡∏ô**

‡πÅ‡∏Å‡πâ‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå `.env`:

### **1. every_record** (‡πÄ‡∏õ‡∏¥‡∏î‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á)
```bash
GATE_TRIGGER_MODE=every_record
```
- ‚úÖ ‡πÄ‡∏õ‡∏¥‡∏î‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏≠‡πà‡∏≤‡∏ô‡∏õ‡πâ‡∏≤‡∏¢‡πÑ‡∏î‡πâ
- ‚ö†Ô∏è ‡∏≠‡∏≤‡∏à‡πÄ‡∏õ‡∏¥‡∏î‡∏ö‡πà‡∏≠‡∏¢‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ

### **2. per_plate_cooldown** (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥!)
```bash
GATE_TRIGGER_MODE=per_plate_cooldown
OPEN_COOLDOWN_SEC=30
```
- ‚úÖ ‡∏õ‡πâ‡∏≤‡∏¢‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏´‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô 30 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
- ‚úÖ ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÄ‡∏õ‡∏¥‡∏î‡∏ã‡πâ‡∏≥‡πÜ

### **3. never** (‡πÅ‡∏Ñ‡πà‡∏≠‡πà‡∏≤‡∏ô‡∏õ‡πâ‡∏≤‡∏¢)
```bash
GATE_TRIGGER_MODE=never
```
- ‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß
- ‚úÖ ‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏°‡πâ‡∏Å‡∏±‡πâ‡∏ô

---

## üîå **‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î Arduino**

### **‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:**
```bash
SERIAL_ENABLED=true
```

### **‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:**
```bash
SERIAL_ENABLED=false
```

> üí° ‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠: ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ Arduino ‡∏´‡∏£‡∏∑‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÅ‡∏Ñ‡πà‡∏≠‡πà‡∏≤‡∏ô‡∏õ‡πâ‡∏≤‡∏¢

---

# üêõ **‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤**

---

## ‚ùå **‡∏õ‡∏±‡∏ç‡∏´‡∏≤: ‡πÑ‡∏°‡πà‡πÄ‡∏´‡πá‡∏ô Port**

### **macOS:**
```bash
# ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Driver (‡∏ñ‡πâ‡∏≤‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô)
# Arduino UNO ‡πÉ‡∏ä‡πâ CH340 chip ‡∏ö‡∏≤‡∏á‡∏£‡∏∏‡πà‡∏ô

# ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡∏°‡∏µ port ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
ls /dev/cu.*

# ‡∏ñ‡∏≠‡∏î‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏™‡∏µ‡∏¢‡∏ö‡πÉ‡∏´‡∏°‡πà
```

### **Windows:**
```
1. Device Manager ‚Üí Ports (COM & LPT)
2. ‡πÑ‡∏°‡πà‡πÄ‡∏´‡πá‡∏ô Arduino? ‚Üí ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á CH340 Driver
3. Download ‡∏à‡∏≤‡∏Å: https://sparks.gogo.co.nz/ch340.html
```

### **Linux:**
```bash
# ‡πÄ‡∏û‡∏¥‡πà‡∏° user ‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏•‡∏∏‡πà‡∏° dialout
sudo usermod -a -G dialout $USER

# Logout ‡πÅ‡∏•‡πâ‡∏ß login ‡πÉ‡∏´‡∏°‡πà
```

---

## ‚ùå **‡∏õ‡∏±‡∏ç‡∏´‡∏≤: Upload Error**

```
avrdude: stk500_recv(): programmer is not responding
```

**‡πÅ‡∏Å‡πâ:**
1. ‡∏õ‡∏¥‡∏î Serial Monitor
2. ‡∏Å‡∏î Reset ‡∏ö‡∏ô Arduino (‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏î‡∏á)
3. Upload ‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏±‡∏ô‡∏ó‡∏µ

---

## ‚ùå **‡∏õ‡∏±‡∏ç‡∏´‡∏≤: Servo ‡πÑ‡∏°‡πà‡∏´‡∏°‡∏∏‡∏ô**

### **‡πÄ‡∏ä‡πá‡∏Ñ:**
1. ‚úÖ ‡∏ï‡πà‡∏≠‡∏™‡∏≤‡∏¢‡∏ñ‡∏π‡∏Å‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?
   - Signal ‚Üí Pin 9
   - VCC ‚Üí 5V
   - GND ‚Üí GND

2. ‚úÖ Servo ‡∏°‡∏µ‡πÑ‡∏ü‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?
   - LED ‡∏ö‡∏ô Arduino ‡∏ï‡∏¥‡∏î‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏õ‡∏•‡πà‡∏≤

3. ‚úÖ ‡πÇ‡∏Ñ‡πâ‡∏î‡∏ñ‡∏π‡∏Å‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?
   - Upload ‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á

---

## ‚ùå **‡∏õ‡∏±‡∏ç‡∏´‡∏≤: Website ‡πÑ‡∏°‡πà‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Arduino**

### **‡πÄ‡∏ä‡πá‡∏Ñ .env:**
```bash
# ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô true
SERIAL_ENABLED=true

# Port ‡∏ñ‡∏π‡∏Å‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?
SERIAL_PORT=/dev/cu.usbmodem14201  # ‚Üê ‡πÄ‡∏ä‡πá‡∏Ñ‡πÉ‡∏´‡πâ‡∏î‡∏µ

# Baud rate ‡∏ñ‡∏π‡∏Å‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?
SERIAL_BAUD=115200
```

### **‡∏ó‡∏î‡∏™‡∏≠‡∏ö Python:**
```bash
python -c "from api.arduino import ping_arduino; print(ping_arduino())"

# ‡∏Ñ‡∏ß‡∏£‡πÑ‡∏î‡πâ: True
# ‡∏ñ‡πâ‡∏≤‡πÑ‡∏î‡πâ: False ‚Üí ‡πÄ‡∏ä‡πá‡∏Ñ port ‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á
```

---

## ‚ùå **‡∏õ‡∏±‡∏ç‡∏´‡∏≤: Permission Denied (Linux/macOS)**

```bash
# ‡πÉ‡∏´‡πâ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á port
sudo chmod 666 /dev/ttyACM0

# ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏° user ‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏•‡∏∏‡πà‡∏°
sudo usermod -a -G dialout $USER  # Linux
sudo dscl . -append /Groups/_developer GroupMembership $USER  # macOS
```

---

# ‚úÖ **Checklist ‡∏Å‡πà‡∏≠‡∏ô‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô**

```
‚òëÔ∏è Arduino UNO ‡∏ï‡πà‡∏≠‡∏™‡∏≤‡∏¢ Servo ‡πÅ‡∏•‡πâ‡∏ß
‚òëÔ∏è Servo ‡∏ï‡πà‡∏≠: Signal‚ÜíPin9, VCC‚Üí5V, GND‚ÜíGND
‚òëÔ∏è ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Arduino IDE ‡πÅ‡∏•‡πâ‡∏ß
‚òëÔ∏è Upload ‡πÑ‡∏ü‡∏•‡πå gate_control_wifi.ino ‡πÅ‡∏•‡πâ‡∏ß
‚òëÔ∏è ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏î‡πâ‡∏ß‡∏¢ Serial Monitor ‡πÅ‡∏•‡πâ‡∏ß (PING ‚Üí PONG)
‚òëÔ∏è ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå .env ‡πÅ‡∏•‡πâ‡∏ß
‚òëÔ∏è ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ SERIAL_ENABLED=true
‚òëÔ∏è ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ SERIAL_PORT ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
‚òëÔ∏è ‡∏£‡∏±‡∏ô‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡πÅ‡∏•‡πâ‡∏ß
‚òëÔ∏è ‡πÄ‡∏´‡πá‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° "[ARDUINO] Connected"
‚òëÔ∏è ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡πÅ‡∏•‡πâ‡∏ß
‚òëÔ∏è Servo ‡∏´‡∏°‡∏∏‡∏ô‡πÑ‡∏î‡πâ!
```

---

# üéØ **‡∏™‡∏£‡∏∏‡∏õ**

## **Arduino:**
1. ‡∏ï‡πà‡∏≠‡∏™‡∏≤‡∏¢ Servo ‚Üí Pin 9, 5V, GND
2. ‡πÄ‡∏õ‡∏¥‡∏î `arduino/gate_control_wifi.ino` ‡πÉ‡∏ô Arduino IDE
3. Upload ‡πÑ‡∏õ‡∏ó‡∏µ‡πà Arduino
4. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏î‡πâ‡∏ß‡∏¢ Serial Monitor

## **Website:**
1. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå `.env`
2. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤:
   - `SERIAL_ENABLED=true`
   - `SERIAL_PORT=/dev/cu.usbmodem...` (‡∏´‡∏≤ port ‡∏Å‡πà‡∏≠‡∏ô)
   - `SERIAL_BAUD=115200`
3. ‡∏£‡∏±‡∏ô‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå: `python -m api.main`
4. ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡πÄ‡∏´‡πá‡∏ô "[ARDUINO] Connected"
5. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ ‚Üí ‡πÑ‡∏°‡πâ‡∏Å‡∏±‡πâ‡∏ô‡πÄ‡∏õ‡∏¥‡∏î!

---

**üéâ ‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß! ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô!**

‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ ‡πÉ‡∏´‡πâ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ï‡∏≤‡∏° "‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤" ‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡∏Ñ‡∏£‡∏±‡∏ö üòä

